# DW_indicators_BPL
R code used for statistical analyses and plots in *Climate variability is an important driver of water treatability in a shallow reservoir* (Spence, Painter, Nazemi, Venkiteswaran, Baulch, 2025)

author: "Danielle Spence"

date: "October 2024"

output:
  pdf_document: default
  html_document: default
  
---

Overview
--------

The code in this replication package uses R to construct all analyses in *TITLE*. Here, the code to generate the data for 2 tables and 4 figures in the main paper, as well as code for supplemental information. Scripts for data analysis are available at https://github.com/daniellespence/DW_indicators_BPL

Data Availability and Provenance Statements
----------------------------

- [ ] This paper does not involve analysis of external data (i.e., no data are used or the only data are generated by the authors via simulation in their code).

### Statement about Rights

- [x] I certify that the author(s) of the manuscript have legitimate access to and permission to use the data used in this manuscript. 


### License for Data

Licence: Open Government Licence - Canada

### Summary of Availability

- [ ] All data **are** publicly available.
- [ ] Some data **cannot be made** publicly available.
- [x] **No data can be made** publicly available.

### Details on each Data Source

Data were provided by the Buffalo Pound Water Treatment Plant.

Data were prepared using scripts available at https://github.com/daniellespence/DW_indicators_BPL/tree/main/Code/Data%20Cleaning

Datafiles used for each GAM were specific to the treatability indicator (to maximize observations of each):  
- `bpgamdataCLEAN_Conductivity.csv`
- `bpgamdataCLEAN_TDS.csv`
- `bpgamdataCLEAN_TON.csv`
- `bpgamdataCLEAN_DOC.csv`
- `bpgamdataCLEAN_Turb.csv`

Computational requirements
---------------------------

### Software Requirements

- R 3.6.3
  - `pacman`
  - `tidyverse`
  - `mgcv`
  - `gratia`
  - `dplyr`
  - `ggplot2`
  - `cowplot`
  - 'patchwork'


### Memory and Runtime Requirements

#### Summary

Approximate time needed to reproduce the analyses on a standard (2020) desktop machine:

- [ ] <10 minutes
- [x] 10-60 minutes
- [ ] 1-8 hours
- [ ] 8-24 hours
- [ ] 1-3 days
- [ ] 3-14 days
- [ ] > 14 days
- [ ] Not feasible to run on a desktop machine, as described below.

#### Details

The code was run on a **7-core Intel-based desktop with 32 GB of RAM and a Windows 10 operating system**. 

Description of programs/code
----------------------------

Data preparation and GAM analysis scripts are available at https://github.com/daniellespence/DW_indicators_BPL
The code is licensed under a MIT/BSD/GPL/Creative Commons license.

Instructions to Replicators
---------------------------

- You will need to install the following R packages

`install.packages("pacman", "tidyverse", "mgcv", "gratia", "dplyr", "ggplot2", "cowplot", 'patchwork')`

- Prepare the data using scripts in https://github.com/daniellespence/DW_indicators_BPL/tree/main/Code/Data%20Cleaning
- Run time series GAMs using scripts in https://github.com/daniellespence/DW_indicators_BPL/tree/main/Code/Time%20series
- Run each GAM using scripts in https://github.com/daniellespence/DW_indicators_BPL/tree/main/Code
- See how model fit was selected in https://github.com/daniellespence/DW_indicators_BPL/tree/main/Code/Model%20selection
- Create all figures used in main paper (and some from supporting information) in https://github.com/daniellespence/DW_indicators_BPL/tree/main/Code/Figures
